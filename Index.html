function createScreenshot(img) {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');

  const padding = 20; // Space between image and window frame
  const borderWidth = 10; // Width of the window border

  // Calculate the new dimensions for the image to fit inside the frame
  const imgWidth = img.width - (padding + borderWidth) * 2;
  const imgHeight = img.height - (padding + borderWidth) * 2 - 30;

  canvas.width = img.width;
  canvas.height = img.height;

  // Draw window frame
  ctx.fillStyle = '#f0f0f0';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = '#ccc';
  ctx.fillRect(0, 0, canvas.width, 30);
  ctx.strokeStyle = '#000';
  ctx.lineWidth = borderWidth;
  ctx.strokeRect(borderWidth, 30 + borderWidth, canvas.width - borderWidth * 2, canvas.height - borderWidth * 2 - 30);

  // Draw image inside the frame with adjusted dimensions
  ctx.drawImage(img, padding + borderWidth, padding + borderWidth + 30, imgWidth, imgHeight);

  const newImg = document.createElement('img');
  newImg.src = canvas.toDataURL('image/jpeg', 0.9);
  return newImg;
}
